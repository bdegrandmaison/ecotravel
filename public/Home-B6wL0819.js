var U=t=>{throw TypeError(t)};var D=(t,e,o)=>e.has(t)||U("Cannot "+o);var c=(t,e,o)=>(D(t,e,"read from private field"),o?o.call(t):e.get(t)),N=(t,e,o)=>e.has(t)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),M=(t,e,o,s)=>(D(t,e,"write to private field"),s?s.call(t,o):e.set(t,o),o),z=(t,e,o)=>(D(t,e,"access private method"),o);import{a as r,h as be,a6 as ye,p as Z,C as Ce,J as T,a1 as xe,a2 as Se,V as G,aw as Ie,T as $e,_ as Ee,d as je,c as we,ax as Oe,ay as Re,az as X,aA as Ne,aB as ee,aC as Me,aD as H,au as u,av as q}from"./index-C2d7POa4.js";import{R as ze,a as Pe,c as Be,F as R,I as De,B as Te,C as He,D as _e}from"./index-ltpqFnfH.js";import{R as ke,n as Ae,s as Fe}from"./utils-C6SRMMpU.js";import{L as J,D as Le}from"./DestinationCard-XqmQLYEh.js";import{I as We,g as Ve,p as Ke,r as Ue,R as Ge,d as _,f as Xe,T as qe}from"./App-IUJ1lKty.js";var Je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Qe=function(e,o){return r.createElement(We,be({},e,{ref:o,icon:Je}))},Ye=r.forwardRef(Qe);const P=(t,e,o,s,n)=>({background:t,border:`${Z(s.lineWidth)} ${s.lineType} ${e}`,[`${n}-icon`]:{color:o}}),Ze=t=>{const{componentCls:e,motionDurationSlow:o,marginXS:s,marginSM:n,fontSize:l,fontSizeLG:d,lineHeight:m,borderRadiusLG:f,motionEaseInOutCirc:h,withDescriptionIconSize:p,colorText:g,colorTextHeading:$,withDescriptionPadding:E,defaultPadding:a}=t;return{[e]:Object.assign(Object.assign({},ye(t)),{position:"relative",display:"flex",alignItems:"center",padding:a,wordWrap:"break-word",borderRadius:f,[`&${e}-rtl`]:{direction:"rtl"},[`${e}-content`]:{flex:1,minWidth:0},[`${e}-icon`]:{marginInlineEnd:s,lineHeight:0},"&-description":{display:"none",fontSize:l,lineHeight:m},"&-message":{color:$},[`&${e}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${o} ${h}, opacity ${o} ${h},
        padding-top ${o} ${h}, padding-bottom ${o} ${h},
        margin-bottom ${o} ${h}`},[`&${e}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${e}-with-description`]:{alignItems:"flex-start",padding:E,[`${e}-icon`]:{marginInlineEnd:n,fontSize:p,lineHeight:0},[`${e}-message`]:{display:"block",marginBottom:s,color:$,fontSize:d},[`${e}-description`]:{display:"block",color:g}},[`${e}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},et=t=>{const{componentCls:e,colorSuccess:o,colorSuccessBorder:s,colorSuccessBg:n,colorWarning:l,colorWarningBorder:d,colorWarningBg:m,colorError:f,colorErrorBorder:h,colorErrorBg:p,colorInfo:g,colorInfoBorder:$,colorInfoBg:E}=t;return{[e]:{"&-success":P(n,s,o,t,e),"&-info":P(E,$,g,t,e),"&-warning":P(m,d,l,t,e),"&-error":Object.assign(Object.assign({},P(p,h,f,t,e)),{[`${e}-description > pre`]:{margin:0,padding:0}})}}},tt=t=>{const{componentCls:e,iconCls:o,motionDurationMid:s,marginXS:n,fontSizeIcon:l,colorIcon:d,colorIconHover:m}=t;return{[e]:{"&-action":{marginInlineStart:n},[`${e}-close-icon`]:{marginInlineStart:n,padding:0,overflow:"hidden",fontSize:l,lineHeight:Z(l),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${o}-close`]:{color:d,transition:`color ${s}`,"&:hover":{color:m}}},"&-close-text":{color:d,transition:`color ${s}`,"&:hover":{color:m}}}}},ot=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`}),st=Ve("Alert",t=>[Ze(t),et(t),tt(t)],ot);var Q=function(t,e){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(o[s[n]]=t[s[n]]);return o};const nt={success:ze,info:Ye,error:Ge,warning:Pe},rt=t=>{const{icon:e,prefixCls:o,type:s}=t,n=nt[s]||null;return e?Ue(e,r.createElement("span",{className:`${o}-icon`},e),()=>({className:T(`${o}-icon`,{[e.props.className]:e.props.className})})):r.createElement(n,{className:`${o}-icon`})},it=t=>{const{isClosable:e,prefixCls:o,closeIcon:s,handleClose:n,ariaProps:l}=t,d=s===!0||s===void 0?r.createElement(ke,null):s;return e?r.createElement("button",Object.assign({type:"button",onClick:n,className:`${o}-close-icon`,tabIndex:0},l),d):null},te=r.forwardRef((t,e)=>{const{description:o,prefixCls:s,message:n,banner:l,className:d,rootClassName:m,style:f,onMouseEnter:h,onMouseLeave:p,onClick:g,afterClose:$,showIcon:E,closable:a,closeText:x,closeIcon:O,action:F,id:oe}=t,se=Q(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[L,ne]=r.useState(!1),W=r.useRef(null);r.useImperativeHandle(e,()=>({nativeElement:W.current}));const{getPrefixCls:re,direction:ie,alert:i}=r.useContext(Ce),v=re("alert",s),[ae,le,ce]=st(v),de=y=>{var C;ne(!0),(C=t.onClose)===null||C===void 0||C.call(t,y)},V=r.useMemo(()=>t.type!==void 0?t.type:l?"warning":"info",[t.type,l]),ue=r.useMemo(()=>typeof a=="object"&&a.closeIcon||x?!0:typeof a=="boolean"?a:O!==!1&&O!==null&&O!==void 0?!0:!!(i!=null&&i.closable),[x,O,a,i==null?void 0:i.closable]),K=l&&E===void 0?!0:E,me=T(v,`${v}-${V}`,{[`${v}-with-description`]:!!o,[`${v}-no-icon`]:!K,[`${v}-banner`]:!!l,[`${v}-rtl`]:ie==="rtl"},i==null?void 0:i.className,d,m,ce,le),he=Ke(se,{aria:!0,data:!0}),pe=r.useMemo(()=>{var y,C;return typeof a=="object"&&a.closeIcon?a.closeIcon:x||(O!==void 0?O:typeof(i==null?void 0:i.closable)=="object"&&(!((y=i==null?void 0:i.closable)===null||y===void 0)&&y.closeIcon)?(C=i==null?void 0:i.closable)===null||C===void 0?void 0:C.closeIcon:i==null?void 0:i.closeIcon)},[O,a,x,i==null?void 0:i.closeIcon]),fe=r.useMemo(()=>{const y=a??(i==null?void 0:i.closable);return typeof y=="object"?Q(y,["closeIcon"]):{}},[a,i==null?void 0:i.closable]);return ae(r.createElement(xe,{visible:!L,motionName:`${v}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:y=>({maxHeight:y.offsetHeight}),onLeaveEnd:$},(y,C)=>{let{className:ge,style:ve}=y;return r.createElement("div",Object.assign({id:oe,ref:Se(W,C),"data-show":!L,className:T(me,ge),style:Object.assign(Object.assign(Object.assign({},i==null?void 0:i.style),f),ve),onMouseEnter:h,onMouseLeave:p,onClick:g,role:"alert"},he),K?r.createElement(rt,{description:o,icon:t.icon,prefixCls:v,type:V}):null,r.createElement("div",{className:`${v}-content`},n?r.createElement("div",{className:`${v}-message`},n):null,o?r.createElement("div",{className:`${v}-description`},o):null),F?r.createElement("div",{className:`${v}-action`},F):null,r.createElement(it,{isClosable:ue,prefixCls:v,closeIcon:pe,handleClose:de,ariaProps:fe}))}))});function at(t,e,o){return e=G(e),Ie(t,$e()?Reflect.construct(e,o||[],G(t).constructor):e.apply(t,o))}let lt=function(t){function e(){var o;return we(this,e),o=at(this,e,arguments),o.state={error:void 0,info:{componentStack:""}},o}return Ee(e,t),je(e,[{key:"componentDidCatch",value:function(s,n){this.setState({error:s,info:n})}},{key:"render",value:function(){const{message:s,description:n,id:l,children:d}=this.props,{error:m,info:f}=this.state,h=(f==null?void 0:f.componentStack)||null,p=typeof s>"u"?(m||"").toString():s,g=typeof n>"u"?h:n;return m?r.createElement(te,{id:l,type:"error",message:p,description:r.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},g)}):d}}])}(r.Component);const k=te;k.ErrorBoundary=lt;var j,w,b,S,I,B,A,Y,ct=(Y=class extends Oe{constructor(e,o){super();N(this,I);N(this,j);N(this,w);N(this,b);N(this,S);M(this,j,e),this.setOptions(o),this.bindMethods(),z(this,I,B).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var s;const o=this.options;this.options=c(this,j).defaultMutationOptions(e),Re(this.options,o)||c(this,j).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,b),observer:this}),o!=null&&o.mutationKey&&this.options.mutationKey&&X(o.mutationKey)!==X(this.options.mutationKey)?this.reset():((s=c(this,b))==null?void 0:s.state.status)==="pending"&&c(this,b).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=c(this,b))==null||e.removeObserver(this)}onMutationUpdate(e){z(this,I,B).call(this),z(this,I,A).call(this,e)}getCurrentResult(){return c(this,w)}reset(){var e;(e=c(this,b))==null||e.removeObserver(this),M(this,b,void 0),z(this,I,B).call(this),z(this,I,A).call(this)}mutate(e,o){var s;return M(this,S,o),(s=c(this,b))==null||s.removeObserver(this),M(this,b,c(this,j).getMutationCache().build(c(this,j),this.options)),c(this,b).addObserver(this),c(this,b).execute(e)}},j=new WeakMap,w=new WeakMap,b=new WeakMap,S=new WeakMap,I=new WeakSet,B=function(){var o;const e=((o=c(this,b))==null?void 0:o.state)??Ne();M(this,w,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},A=function(e){ee.batch(()=>{var o,s,n,l,d,m,f,h;if(c(this,S)&&this.hasListeners()){const p=c(this,w).variables,g=c(this,w).context;(e==null?void 0:e.type)==="success"?((s=(o=c(this,S)).onSuccess)==null||s.call(o,e.data,p,g),(l=(n=c(this,S)).onSettled)==null||l.call(n,e.data,null,p,g)):(e==null?void 0:e.type)==="error"&&((m=(d=c(this,S)).onError)==null||m.call(d,e.error,p,g),(h=(f=c(this,S)).onSettled)==null||h.call(f,void 0,e.error,p,g))}this.listeners.forEach(p=>{p(c(this,w))})})},Y);function dt(t,e){const o=Me(),[s]=r.useState(()=>new ct(o,t));r.useEffect(()=>{s.setOptions(t)},[s,t]);const n=r.useSyncExternalStore(r.useCallback(d=>s.subscribe(ee.batchCalls(d)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),l=r.useCallback((d,m)=>{s.mutate(d,m).catch(Ae)},[s]);if(n.error&&Fe(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:l,mutateAsync:n.mutate}}const{Title:ut}=qe,{RangePicker:mt}=_e;H.extend(Be);const ht=t=>t&&(t<H("2024-07-01",_)||t>H("2024-12-31",_)),pt=()=>{const t=[];for(let e=1;t.length!==5;e++){let o=Math.floor(Math.random()*20)+1;t.includes(o)||t.push(o)}return t},ft=async t=>{const e=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Network response was not ok");return e.json()},St=()=>{const[t]=R.useForm(),e=R.useWatch("dates",t),[o,s]=r.useState(),n=R.useWatch("travellers",t),[l,d]=r.useState(!0),[m,f]=r.useState(!1),[h,p]=r.useState(null),g=window.innerWidth,{mutate:$}=dt({mutationFn:ft,onSettled:(a,x)=>{x&&p(x),!x&&a&&(a.length===0?f(!0):(m&&f(!1),s(a)))}});r.useEffect(()=>{e||n?d(!1):l||d(!0)},[e,n]);const E=a=>{a.dates||a.travellers?$(a):console.log("Veuillez entrer une plage de dates")};return u.jsxs("div",{children:[u.jsx(ut,{children:"Bienvenue sur EcoTravel"}),u.jsx("p",{children:"Découvrez des destinations en participant à des actions pour sauver l'écosysteme de notre planète."}),u.jsxs(R,{form:t,name:"customized_form_controls",layout:g<768?"vertical":"inline",onFinish:E,children:[u.jsx(R.Item,{name:"dates",label:"Entrez une plage de dates: ",children:u.jsx(mt,{disabledDate:ht,format:_,placement:"bottomLeft"})}),u.jsx(R.Item,{name:"travellers",label:"Nombre de voyageurs: ",children:u.jsx(De,{type:"number"})}),u.jsx(R.Item,{children:u.jsx(Te,{type:"primary",htmlType:"submit",disabled:l,children:"Rechercher"})})]}),o&&o.length>0?u.jsxs("div",{style:{padding:" 1rem O",margin:"1rem 0"},children:[u.jsxs("h4",{children:[o.length," résultats à votre recherche:"]}),u.jsx(J,{grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:6,xxl:3},dataSource:o,renderItem:a=>u.jsx(J.Item,{children:u.jsx(Le,{destination:a})}),style:{margin:"1rem 0"}})]}):null,h?u.jsx(k,{message:"Une erreur est survenue lors du traitement de votre recherche.",type:"error",showIcon:!0,style:{padding:" 1rem O",margin:"1rem 0"}}):null,m?u.jsx(k,{message:"Aucun résultat pour votre recherche.",type:"warning",showIcon:!0,style:{padding:" 1rem O",margin:"1rem 0"}}):null,u.jsx("div",{style:{padding:" 1rem O"},children:u.jsx(He,{autoplay:!0,adaptiveHeight:!0,style:{margin:"2rem 0"},children:pt().map(a=>u.jsx("div",{children:u.jsx("img",{src:`${Xe()}${q[a-1].image.src}`,alt:q[a-1].image.altText,style:{margin:"auto"},loading:"eager"})},a))})})]})};export{St as default};
